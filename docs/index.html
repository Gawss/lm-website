<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <!-- <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />

    <title>LM | Portfolio</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@300&display=swap"
      rel="stylesheet"
    />
  </head>
  <body
    style="
      text-align: center;
      display: flex;
      flex-direction: column;
      background-color: black;
      margin: 0;
    "
  >
    <canvas
      id="unity-canvas"
      style="width: 100dvw; height: 100dvh; background: #231f20; margin: 0"
    ></canvas>
    <script src="unity-webgl-gzip-fallback/Build/unity-webgl-gzip-fallback.loader.js"></script>
    <script>
      // function detect() {
      //   var isMobile = window.orientation > -1;

      //   createUnityInstance(document.querySelector("#unity-canvas"), {
      //     dataUrl: "unity-webgl/Build/unity-webgl.data",
      //     frameworkUrl: "unity-webgl/Build/unity-webgl.framework.js",
      //     codeUrl: "unity-webgl/Build/unity-webgl.wasm",
      //     streamingAssetsUrl: "unity-webgl/StreamingAssets",
      //     companyName: "GawssCompany",
      //     productName: "Portfolio",
      //     productVersion: "0.1",
      //   });
      // }
      // detect();

      function getUrlParam(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
      }

      const legacyMode = getUrlParam("legacy");

      if (legacyMode === "true" || legacyMode === null) {
        // Redirect to the old site
        window.location.href = "old/index.html";
      } else {
        // Load Unity
        const script = document.createElement("script");
        script.src =
          "unity-webgl-gzip-fallback/Build/unity-webgl-gzip-fallback.loader.js";
        script.onload = () => {
          createUnityInstance(document.querySelector("#unity-canvas"), {
            dataUrl:
              "unity-webgl-gzip-fallback/Build/unity-webgl-gzip-fallback.data.unityweb",
            frameworkUrl:
              "unity-webgl-gzip-fallback/Build/unity-webgl-gzip-fallback.framework.js.unityweb",
            workerUrl:
              "unity-webgl-gzip-fallback/Build/unity-webgl-gzip-fallback.worker.js.unityweb",
            codeUrl:
              "unity-webgl-gzip-fallback/Build/unity-webgl-gzip-fallback.wasm.unityweb",
            streamingAssetsUrl: "unity-webgl-gzip-fallback/StreamingAssets",
            companyName: "GawssCompany",
            productName: "Portfolio",
            productVersion: "0.1",
            // dataUrl: "unity-webgl/Build/unity-webgl.data",
            // frameworkUrl: "unity-webgl/Build/unity-webgl.framework.js",
            // codeUrl: "unity-webgl/Build/unity-webgl.wasm",
            // streamingAssetsUrl: "unity-webgl/StreamingAssets",
            // companyName: "GawssCompany",
            // productName: "Portfolio",
            // productVersion: "0.1",
          });
        };
        document.body.appendChild(script);
      }
    </script>
  </body>
</html>
